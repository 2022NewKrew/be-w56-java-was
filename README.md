# be-w56-java-was
5,6주차 간단 웹 서버 구현

# step1 
- [x] path에 해당하는 파일 읽어 응답하기 힌트(1단계 요구사항)


### 알게된점
- 제일 처음 html을 가져오고 해당 파일 안에있는 css,js정보를 통해 추가 request를 요청한다는점

### 문제 해결
- 처음 index.html을 요청하니 css가 적용이 되지 않았다. -> response에 context-type을 text/html로 고정되어 있던부분을 수정해줬다.


# step2
- [x] Get방식 회원가입 구현(2단계 요구사항)

### 알게된점
- 정적 팩토리 메소드(Request 클래스에서 queryString을 String형태에서 Map형태로 바꾸기 위해 처음엔 set함수를 사용했지만, 다른곳에서 set함수를 무분별하게 사용할 수 있기에 정적팩토리 메소드를 구현해주었습니다)

### 회고
- 이번 프로젝트는 조금 새로운 주제라 프로젝트 구조를 어떻게 설정해야 하는지 고민을 하다가 결국 3-4주차 스프링프로젝트의 경험을 바탕으로 mvc패턴과 비슷하게 진행했습니다. mvc패턴을 기반으로 request와 response를 객체화 시켜서 주고받는 개념으로 진행하였습니다

# step3
- [x] post방식 회원가입 완료

### 알게된점
    - 멀티스레드 환경에서 스태틱 메소드 호출시 thread-safe한지?
      -> thread-safe하다.(사전지식을 잘 못 알고 있어서 생긴 궁금증)
      -> 함수도 메모리영역에서 주소값으로 핸들링된다고 생각 하고 있었다. 하지만, 함수는 코드영역에서 관리되고 각 스레드들의 스택 프레임에는 변수들만 할당 되는 것으로 알게되었다.
      -> 애초에 스태틱 메소드가 thread-safe하지 않으면 멀티스레드 환경에서는 모든 메소드를 synchronized 시켰어야 했을 것. 
    
    - 그러면 함수는 어떤식으로 관리되나?
      -> fp(프레임 포인터) 레지스터에 되돌아갈 sp위치를 저장함으로써 관리된다. 


# step4
- [x] cookie를 이용한 로그인 구현

### 회고
- 이번 프로젝트를 완성하고 돌아보니 절차지향적으로 코드를 작성한 것 같습니다. 그래서 내일은 좀 더 구조적인 리팩토링을 진행할 예정입니다.

# step5
- [ ] 객체지향적으로 리팩토링
- [x] router에서 controller와 method를 서칭하는 로직을 reflection을 사용하여 리팩토링
- [x] db 연결(mysql)
- [x] 5단계 기능구현(로그인 상태일 경우 사용자 목록을 보여주고 로그인 하지 않은 상태면 로그인 페이지로 이동)

### 회고
- db 연결 순서
  1. db jar파일 다운로드
  2. db 버전에 맞게 build.gradle에 추가(implementation 'mysql:mysql-connector-java:8.0.27')
  3. 끝